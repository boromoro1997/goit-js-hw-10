{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описаний в документації\nimport flatpickr from \"flatpickr\";\n// Додатковий імпорт стилів\nimport \"flatpickr/dist/flatpickr.min.css\";\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet timepicked = null;\nconst btn = document.querySelector(\"[data-start]\");\nconst input = document.querySelector('#datetime-picker');\nbtn.disabled = true;\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        console.log(selectedDates[0]);\n       \n        timepicked = selectedDates[0];\n        const dateNow = new Date();\n        if (timepicked < dateNow) {\n           btn.disabled = true;\n           return iziToast.show({\n            message: 'Please choose a date in the future',\n            backgroundColor: 'red',\n            messageColor: 'white',\n            position: 'topRight',\n            messageSize:'500px'\n        });\n        }\n        btn.disabled = false;\n    },\n};\nclass Timer {\n    constructor({onTick}) {\n        this.onTick = onTick;\n    }\n    addLeadingZero(value) {\n        return String(value).padStart(2, \"0\");\n    }\n    convertMs(ms) {\n        const second = 1000;\n        const minute = second * 60;\n        const hour = minute * 60;\n        const day = hour * 24;\n        const days = this.addLeadingZero(Math.floor(ms / day));\n        const hours =this.addLeadingZero(Math.floor((ms % day) / hour));\n        const minutes = this.addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n        const seconds =this.addLeadingZero( Math.floor((((ms % day) % hour) % minute) / second));\n        return { days, hours, minutes, seconds };\n    }\n    // countDown() {\n    //     const time = Date.now();\n    //     timepicked = timepicked.getTime() - time;\n    //     btn.disabled = true;\n    //     input.disabled = true;\n    //     const intervalID = setInterval(() => {\n    //         const currentTime = Date.now();\n    //         const timePast = currentTime - time;\n    //         const timeLeft = this.convertMs(timepicked - timePast);\n    //         console.log(typeof timePast);\n    //         this.onTick(timeLeft);\n    //         if (timepicked - timePast === 0 ||timepicked - timePast<0) {\n    //             clearInterval(intervalID);\n    //             this.onTick({\n    //                 days: \"00\",\n    //                 hours: \"00\",\n    //                 minutes: \"00\",\n    //                 seconds:\"00\"\n    //             })\n    //             input.disabled = false;\n    //         }\n    //     }, 1000)\n    // }\n    countDown() {\n        const targetTime = timepicked.getTime();\n        const startTime = Date.now();\n        const duration = targetTime - startTime;\n        if (duration <= 0) {\n            this.onTick({\n                days: \"00\",\n                hours: \"00\",\n                minutes: \"00\",\n                seconds: \"00\"\n            });\n            return;\n        }\n        btn.disabled = true;\n        input.disabled = true;\n        const intervalID = setInterval(() => {\n            const currentTime = Date.now();\n            const elapsed = currentTime - startTime;\n            const remaining = duration - elapsed;\n            if (remaining <= 0) {\n                clearInterval(intervalID);\n                this.onTick({\n                    days: \"00\",\n                    hours: \"00\",\n                    minutes: \"00\",\n                    seconds: \"00\"\n                });\n                input.disabled = false;\n                return;\n            }\n            const timeLeft = this.convertMs(remaining);\n            this.onTick(timeLeft);\n        }, 1000);\n    }\n    \n}\nconst timerElements = {\n    days: document.querySelector('[data-days]'),\n    hours: document.querySelector('[data-hours]'),\n    minutes: document.querySelector('[data-minutes]'),\n    seconds: document.querySelector('[data-seconds]'),\n  };\nfunction update({ days, hours, minutes, seconds }) {\n    timerElements.days.textContent =`${days}`;\n    timerElements.hours.textContent =`${hours}`;\n    timerElements.minutes.textContent =`${minutes}`;\n    timerElements.seconds.textContent =`${seconds}`;\n}\nconst newTimer = new Timer({onTick:update});\n \nflatpickr(\"#datetime-picker\", options);\nbtn.addEventListener(\"click\", newTimer.countDown.bind(newTimer));\n"],"names":["timepicked","btn","input","options","selectedDates","iziToast","Timer","onTick","value","ms","days","hours","minutes","seconds","targetTime","startTime","duration","intervalID","elapsed","remaining","timeLeft","timerElements","update","newTimer","flatpickr"],"mappings":"sGASA,IAAIA,EAAa,KACjB,MAAMC,EAAM,SAAS,cAAc,cAAc,EAC3CC,EAAQ,SAAS,cAAc,kBAAkB,EACvDD,EAAI,SAAW,GACf,MAAME,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAKnB,GAJA,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAE5BJ,EAAaI,EAAc,CAAC,EAExBJ,EADY,IAAI,KAEjB,OAAAC,EAAI,SAAW,GACRI,EAAS,KAAK,CACpB,QAAS,qCACT,gBAAiB,MACjB,aAAc,QACd,SAAU,WACV,YAAY,OACxB,CAAS,EAEDJ,EAAI,SAAW,EAClB,CACL,EACA,MAAMK,CAAM,CACR,YAAY,CAAC,OAAAC,CAAM,EAAG,CAClB,KAAK,OAASA,CACjB,CACD,eAAeC,EAAO,CAClB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACvC,CACD,UAAUC,EAAI,CAKV,MAAMC,EAAO,KAAK,eAAe,KAAK,MAAMD,EAAK,KAAG,CAAC,EAC/CE,EAAO,KAAK,eAAe,KAAK,MAAOF,EAAK,MAAO,IAAI,CAAC,EACxDG,EAAU,KAAK,eAAe,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,CAAC,EACtEI,EAAS,KAAK,eAAgB,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EACvF,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACzC,CAwBD,WAAY,CACR,MAAMC,EAAad,EAAW,UACxBe,EAAY,KAAK,MACjBC,EAAWF,EAAaC,EAC9B,GAAIC,GAAY,EAAG,CACf,KAAK,OAAO,CACR,KAAM,KACN,MAAO,KACP,QAAS,KACT,QAAS,IACzB,CAAa,EACD,MACH,CACDf,EAAI,SAAW,GACfC,EAAM,SAAW,GACjB,MAAMe,EAAa,YAAY,IAAM,CAEjC,MAAMC,EADc,KAAK,MACKH,EACxBI,EAAYH,EAAWE,EAC7B,GAAIC,GAAa,EAAG,CAChB,cAAcF,CAAU,EACxB,KAAK,OAAO,CACR,KAAM,KACN,MAAO,KACP,QAAS,KACT,QAAS,IAC7B,CAAiB,EACDf,EAAM,SAAW,GACjB,MACH,CACD,MAAMkB,EAAW,KAAK,UAAUD,CAAS,EACzC,KAAK,OAAOC,CAAQ,CACvB,EAAE,GAAI,CACV,CAEL,CACA,MAAMC,EAAgB,CAClB,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CACpD,EACA,SAASC,EAAO,CAAE,KAAAZ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC/CQ,EAAc,KAAK,YAAa,GAAGX,CAAI,GACvCW,EAAc,MAAM,YAAa,GAAGV,CAAK,GACzCU,EAAc,QAAQ,YAAa,GAAGT,CAAO,GAC7CS,EAAc,QAAQ,YAAa,GAAGR,CAAO,EACjD,CACA,MAAMU,EAAW,IAAIjB,EAAM,CAAC,OAAOgB,CAAM,CAAC,EAE1CE,EAAU,mBAAoBrB,CAAO,EACrCF,EAAI,iBAAiB,QAASsB,EAAS,UAAU,KAAKA,CAAQ,CAAC"}